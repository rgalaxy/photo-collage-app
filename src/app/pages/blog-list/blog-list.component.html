<div class="code-editor-container">
  <!-- Screen reader H1 for SEO and accessibility -->
  <h1 class="sr-only">Martin Haryanto's Development Blog - Latest Posts</h1>
  
  <!-- Editor Header Bar -->
  <div class="editor-header">
    <div class="sidebar-controls">
      <button
        class="sidebar-toggle"
        (click)="toggleSidebar()"
        aria-label="Toggle sidebar"
      >
        <span class="toggle-icon">‚ò∞</span>
      </button>
    </div>
    <div class="editor-title">blog_posts.ts - Personal Dev Blog</div>
    <div class="editor-actions">
      <div class="dropdown-container">
        <button
          class="action-button settings-toggle"
          (click)="toggleDropdown()"
          [class.active]="showDropdown"
          aria-label="Settings"
        >
          <span class="action-icon">‚öô</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Dropdown Menu (moved outside header) -->
  <div class="dropdown-menu" [class.show]="showDropdown">
    <div class="dropdown-item" (click)="toggleTheme()">
      <span class="dropdown-icon">{{ isDarkMode ? "‚òÄÔ∏è" : "üåô" }}</span>
      <span class="dropdown-text">{{
        isDarkMode ? "Light Mode" : "Dark Mode"
      }}</span>
    </div>
    <div class="dropdown-item" (click)="toggleMobileOverlay()">
      <span class="dropdown-icon">üì±</span>
      <span class="dropdown-text"
        >{{ showMobileOverlay ? "Hide" : "Show" }} Mobile View</span
      >
    </div>
  </div>

  <!-- Dropdown backdrop -->
  <div
    class="dropdown-backdrop"
    [class.active]="showDropdown"
    (click)="closeDropdown()"
  ></div>

  <!-- File Explorer Sidebar -->
  <div class="editor-layout">
    <!-- Mobile backdrop -->
    <div
      class="sidebar-backdrop"
      [class.active]="sidebarOpen"
      (click)="toggleSidebar()"
    ></div>

    <div class="sidebar" [class.open]="sidebarOpen">
      <div class="file-tree">
        <div class="folder-item expanded">
          <span class="folder-icon">üìÇ</span>
          <span class="folder-name">blog_posts</span>
        </div>
        <div class="file-items">
          <div
            class="file-item active"
            *ngFor="let post of posts; let i = index"
            (click)="scrollToPost(i)"
          >
            <span class="file-icon">üìÑ</span>
            <span class="file-name">{{
              (post.fields.slug || "post-" + i) + ".md"
            }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="main-content">
      <!-- Code Content -->
      <div class="code-content" [class.mobile-overlay-mode]="showMobileOverlay">
        <div class="code-area">
          <!-- Header Comment Block -->
          <div class="code-block header-block">
            <div class="code-line-wrapper">
              <span class="line-number">1</span>
              <div class="code-line">
                <span class="comment">/**</span>
              </div>
            </div>
            <div class="code-line-wrapper">
              <span class="line-number">2</span>
              <div class="code-line">
                <span class="comment typing-animation">
                  * Personal Development Blog Posts</span
                >
              </div>
            </div>
            <div class="code-line-wrapper">
              <span class="line-number">3</span>
              <div class="code-line">
                <span class="comment typing-animation">
                  * A collection of thoughts, tutorials, and experiences</span
                >
              </div>
            </div>
            <div class="code-line-wrapper">
              <span class="line-number">4</span>
              <div class="code-line">
                <span class="comment"> */</span>
              </div>
            </div>
            <div class="code-line-wrapper">
              <span class="line-number">5</span>
              <div class="code-line"></div>
            </div>
          </div>

          <!-- Loading Skeleton -->
          <div *ngIf="isLoading" class="loading-skeleton">
            <div
              *ngFor="let line of getSkeletonLines(); let i = index"
              class="skeleton-post"
            >
              <div class="skeleton-line skeleton-line-full"></div>
              <div class="skeleton-line skeleton-line-medium"></div>
              <div class="skeleton-line skeleton-line-short"></div>
              <div class="skeleton-line skeleton-line-long"></div>
              <div class="skeleton-line skeleton-line-medium"></div>
              <div class="skeleton-line skeleton-line-short"></div>
              <div class="skeleton-line"></div>
            </div>
          </div>

          <!-- Blog Posts as Code Blocks -->
          <div *ngIf="!isLoading" class="blog-posts-container">
            <a
              *ngFor="let post of posts; let i = index"
              [routerLink]="['/blog', post.fields.slug]"
              class="blog-post-code"
              [id]="'post-' + i"
            >
              <div class="code-block">
                <div class="code-line-wrapper">
                  <span class="line-number">{{ getLineNumber(i, 0) }}</span>
                  <div class="code-line">
                    <span class="keyword">const&nbsp;</span>
                    <span class="variable">{{
                      getVariableName(post.fields.title)
                    }}</span>
                    <span class="operator">:&nbsp;</span>
                    <span class="type">BlogPost</span>
                    <span class="operator">&nbsp;=&nbsp;</span>
                    <span class="punctuation">{{ "{" }}</span>
                  </div>
                </div>

                <div class="code-line-wrapper">
                  <span class="line-number">{{ getLineNumber(i, 1) }}</span>
                  <div class="code-line indented">
                    <span class="property">title</span
                    ><span class="punctuation">:&nbsp;</span>
                    <span class="string">"{{ post.fields.title }}"</span
                    ><span class="punctuation">,</span>
                  </div>
                </div>

                <div class="code-line-wrapper">
                  <span class="line-number">{{ getLineNumber(i, 2) }}</span>
                  <div class="code-line indented">
                    <span class="property">createdAt</span
                    ><span class="punctuation">:&nbsp;</span>
                    <span class="string"
                      >"{{ post.sys.createdAt | date : "yyyy-MM-dd" }}"</span
                    ><span class="punctuation">,</span>
                  </div>
                </div>

                <div class="code-line-wrapper">
                  <span class="line-number">{{ getLineNumber(i, 3) }}</span>
                  <div class="code-line indented">
                    <span class="property">updatedAt</span
                    ><span class="punctuation">:&nbsp;</span>
                    <span class="string"
                      >"{{ post.sys.updatedAt | date : "yyyy-MM-dd" }}"</span
                    ><span class="punctuation">,</span>
                  </div>
                </div>

                <div class="code-line-wrapper">
                  <span class="line-number">{{ getLineNumber(i, 4) }}</span>
                  <div class="code-line indented">
                    <span class="comment">// {{ post.fields.excerpt }}</span>
                  </div>
                </div>

                <div class="code-line-wrapper">
                  <span class="line-number">{{ getLineNumber(i, 5) }}</span>
                  <div class="code-line">
                    <span class="punctuation">{{ "}" }};</span>
                  </div>
                </div>
              </div>

              <!-- Hover Overlay -->
              <div class="hover-overlay">
                <div class="hover-content">
                  <div class="hover-title">{{ post.fields.title }}</div>
                  <div class="hover-meta">
                    <span class="hover-date">{{
                      post.sys.createdAt | date : "MMM d, yyyy"
                    }}</span>
                    <span class="hover-separator">‚Ä¢</span>
                    <span class="hover-updated"
                      >Updated
                      {{ post.sys.updatedAt | date : "MMM d, yyyy" }}</span
                    >
                  </div>
                  <div class="hover-excerpt">{{ post.fields.excerpt }}</div>
                </div>
              </div>
            </a>
          </div>

          <!-- Mobile Overlay Content -->
          <div *ngIf="showMobileOverlay" class="mobile-overlay-content">
            <div class="overlay-posts">
              <div
                *ngFor="let post of posts; let i = index"
                class="overlay-post"
              >
                <a
                  [routerLink]="['/blog', post.fields.slug]"
                  class="overlay-post-link"
                >
                  <div class="overlay-title">{{ post.fields.title }}</div>
                  <div class="overlay-meta">
                    <span class="overlay-date">{{
                      post.sys.createdAt | date : "MMM d, yyyy"
                    }}</span>
                    <span class="overlay-separator">‚Ä¢</span>
                    <span class="overlay-updated"
                      >Updated
                      {{ post.sys.updatedAt | date : "MMM d, yyyy" }}</span
                    >
                  </div>
                  <div class="overlay-excerpt">{{ post.fields.excerpt }}</div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Status Bar -->
  <div class="status-bar">
    <div class="status-left">
      <span class="status-item">
        <ng-icon
          name="radixExclamationTriangle"
          color="#FFF"
          size="12"
        ></ng-icon>
        {{ posts.length }} posts
      </span>
    </div>
    <div class="status-right">
      <span class="status-item">TypeScript</span>
      <span class="status-item">Angular</span>
      <span class="status-item">LF</span>
      <span class="status-item"
        >Ln {{ posts.length * LINES_PER_POST + HEADER_LINES + 1 }},
        &copy;2025</span
      >
    </div>
  </div>
</div>
